# Database configuration
# ~~~~~ 
# You can declare as many datasources as you want.
# By convention, the default datasource is named `default`
#db.default.driver=org.h2.Driver
#db.default.url="jdbc:h2:mem:play"
#jdbcUrl="jdbc:log4jdbc:jdbc:postgresql://localhost:5432/scang"
#driverClassName=net.sf.log4jdbc.sql.jdbcapi.DriverSpy

db.default.url="jdbc:postgresql://localhost:5432/scang"
db.default.username=postgres
db.default.password="postgres"

db.default.url=${?DATABASE_URL}
//log all sql statements
#db.default.logStatements=true

applyEvolutions.default=true
# Assets configuration
# ~~~~~
"assets.cache./public/stylesheets/bootstrap.min.css"="max-age=3600"
play.filters.headers.contentSecurityPolicy = "script-src 'self' 'unsafe-inline' jquery.min.js;"
//play.filters.csrf.header.bypassHeaders {
//  X-Requested-With = "*"
//  Csrf-Token = "nocheck"
//}
# Number of database connections
# See https://github.com/brettwooldridge/HikariCP/wiki/About-Pool-Sizing
//corei7 have 4 physical cores and 4 virtual cores so it can process eight threads at once
//fomula for compute connectionPool = ((core_count * 2) + effective_spindle_count(harddisk)) => 4*2 + 1 = 9
fixedConnectionPool = 9
//why using hikaricp? -> http://www.baeldung.com/hikaricp
play.db {
  prototype {
    hikaricp.minimumIdle = ${fixedConnectionPool}
    hikaricp.maximumPoolSize = ${fixedConnectionPool}
  }
}

# Job queue sized to HikariCP connection pool
database.dispatcher {
  executor = "thread-pool-executor"
  throughput = 1
  thread-pool-executor {
    fixed-pool-size = ${fixedConnectionPool}
  }
}

